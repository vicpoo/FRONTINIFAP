<div class="flex h-screen">
  <!-- Sidebar -->
  <aside class="w-72 bg-gradient-to-b from-green-800 to-green-600 text-white flex flex-col">
    <div class="p-6 flex items-center justify-center border-b border-green-500">
      <img src="assets/inifap.png" alt="Logo INIFAP" class="h-16 object-contain">
    </div>
    <nav class="flex-1">
      <ul class="space-y-3 mt-6">
        <li>
          <button (click)="setFiltro('pendiente')" 
                  class="flex items-center w-full px-5 py-3 text-xl font-semibold hover:bg-green-700 rounded-lg transition"
                  [ngClass]="{'bg-green-900': filtro==='pendiente'}">
            <img src="assets/Pendientes.png" alt="Pendientes" class="h-8 w-8 mr-3">
            Archivos Pendientes
          </button>
        </li>
        <li>
          <button (click)="setFiltro('validado')" 
                  class="flex items-center w-full px-5 py-3 text-xl font-semibold hover:bg-green-700 rounded-lg transition"
                  [ngClass]="{'bg-green-900': filtro==='validado'}">
            <img src="assets/Aprovados.png" alt="Validados" class="h-8 w-8 mr-3">
            Archivos Validados
          </button>
        </li>
        <li>
          <button (click)="setFiltro('rechazado')" 
                  class="flex items-center w-full px-5 py-3 text-xl font-semibold hover:bg-green-700 rounded-lg transition"
                  [ngClass]="{'bg-green-900': filtro==='rechazado'}">
            <img src="assets/Rechazados.png" alt="Rechazados" class="h-8 w-8 mr-3">
            Archivos Rechazados
          </button>
        </li>
      </ul>
    </nav>
    <div class="p-6 border-t border-green-500">
      <button (click)="irALogin()" class="flex items-center justify-center w-full px-5 py-3 text-xl font-bold bg-gray-600 hover:bg-red-700 rounded-lg transition">
        <img src="assets/salir.png" alt="Regresar" class="h-8 w-8 mr-3">
        Regresar
      </button> 
    </div>
  </aside>

  <!-- Main content -->
  <main class="flex-1 flex flex-col bg-gray-50">
    <header class="flex justify-between items-center p-6 border-b bg-white shadow">
      <div></div>
      <div class="text-xl font-semibold">Bienvenido</div>
      <div class="text-xl font-bold uppercase">{{ correoUsuario }}</div>
    </header>

    <div class="p-8 flex-1 overflow-auto">
      <!-- Bot칩n para abrir modal de carga -->
      <div class="mb-6">
        <button class="px-6 py-3 text-lg bg-green-600 text-white rounded-lg hover:bg-green-700"
                (click)="mostrarModal = true">
          Subir Nuevo Archivo
        </button>
      </div>

<!-- Modal de carga de archivo -->
<div *ngIf="mostrarModal" class="fixed inset-0 backdrop-blur-sm bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-2xl w-[420px] p-6">
    <h2 class="text-2xl font-bold mb-5 text-center text-green-700">Subir Archivo</h2>

    <form>
      <!-- Archivo -->
      <label class="block mb-3 font-semibold text-gray-700">Seleccionar archivo</label>
      <div class="relative mb-5">
        <input 
          type="file" 
          id="archivoInput"
          (change)="onFileSelected($event)"
          class="hidden" />
        <label for="archivoInput"
          class="flex items-center justify-center w-full px-4 py-3 border border-green-500 text-green-700 rounded-lg cursor-pointer hover:bg-green-50 transition">
          <span *ngIf="!archivoExcel">Elegir archivo...</span>
          <span *ngIf="archivoExcel">{{ archivoExcel.name }}</span>
        </label>
      </div>

      <!-- Correo (rellenado autom치tico) -->
      <label class="block mb-3 font-semibold text-gray-700">Correo del Usuario</label>
      <input type="text" [value]="correoUsuario" readonly 
        class="w-full border rounded px-3 py-2 mb-5 bg-gray-100 text-gray-600">

      <!-- Nombre del archivo -->
      <label class="block mb-3 font-semibold text-gray-700">Nombre del Archivo</label>
      <input type="text" [(ngModel)]="nombreArchivo" name="nombreArchivo" 
        class="w-full border rounded px-3 py-2 mb-5 focus:outline-none focus:ring-2 focus:ring-green-500">

      <!-- Botones -->
      <div class="flex justify-between mt-6">
        <button type="button" (click)="subirArchivo()"
                class="px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 shadow">
          Aceptar
        </button>
        <button type="button" (click)="cerrarModal()"
                class="px-6 py-2 bg-red-500 text-white rounded hover:bg-red-600 shadow">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>


      <!-- Tabla -->
      <div class="overflow-x-auto">
        <table class="w-full border-collapse bg-white rounded-lg shadow text-lg">
          <thead>
            <tr class="bg-green-700 text-white">
              <th class="px-5 py-3 text-left">Nombre</th>
              <th class="px-5 py-3 text-left">Tipo</th>
              <th class="px-5 py-3 text-left">Fecha Subido</th>
              <th class="px-5 py-3 text-left">Estatus</th>
              <th class="px-5 py-3 text-left" *ngIf="filtro === 'pendiente'">Acci칩n</th>
              <th class="px-5 py-3 text-left" *ngIf="filtro === 'rechazado'">Comentario</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let archivo of archivosFiltrados" class="odd:bg-green-50 even:bg-green-100 border-b">
              <td class="px-5 py-3">{{ archivo.nombre }}</td>
              <td class="px-5 py-3">{{ archivo.tipo }}</td>
              <td class="px-5 py-3">{{ archivo.fecha }}</td>
              <td class="px-5 py-3 capitalize">{{ archivo.estatus }}</td>

              <!-- Bot칩n eliminar en pendientes -->
              <td class="px-5 py-3" *ngIf="archivo.estatus === 'pendiente'">
                <button (click)="eliminarPendiente(archivo.nombre)" class="bg-red-500 text-white px-4 py-2 rounded">
                  Eliminar
                </button>
              </td>

              <!-- Comentario en rechazados -->
              <td class="px-5 py-3" *ngIf="archivo.estatus === 'rechazado'">
                <span class="text-red-600 font-semibold">
                  {{ archivo.comentario || 'Sin comentario registrado' }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>
